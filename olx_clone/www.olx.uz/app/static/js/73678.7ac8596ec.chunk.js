"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[73678],{59312:(e,t,r)=>{r.d(t,{aI:()=>a,d5:()=>o});var n=r(67839),a=e=>{var{error:t,isTouched:r,value:a}=e;if(r){if(!a)return t?n.InputStatus.INVALID:n.InputStatus.DEFAULT;if(a)return t?n.InputStatus.INVALID:n.InputStatus.VALID}return n.InputStatus.DEFAULT},o=(e,t,r)=>t&&null!=r?"hasError":e&&null==r?"isFilled":void 0},73678:(e,t,r)=>{r.r(t),r.d(t,{default:()=>tt});var n,a,o,i,l,s,u,c=r(71803),d=r(81917),f=r(48048),m=r(14733),p=r(70342),v=r(98283),b=r(26393),g=r(59312),h=r(86980),y=r(16887),j=r(90845),O=r(57766),x=v.default.div(n||(a=["\n    ","\n"],o||(o=a.slice(0)),n=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(o)}}))),(e=>{var{theme:t,isValid:r}=e;return"\n        margin: ".concat(t.space[32]," 0 0;\n        display: flex;\n        flex-direction: column;\n\n        svg {\n          color: ").concat(r?t.colors.$05_teal_primary:t.colors.$05_red_primary,";\n        }\n    ")})),P=e=>{var{formProps:t,reason:r}=e,{trackEvent:n}=(0,f.rS)(),a=(0,j.useIntl)(),o=c.useRef(null),{values:i,errors:l,touched:s,setFieldTouched:u,handleChange:d}=t,m=r.userNote.required,p=m?a.formatMessage({id:"moderation.abuse.requiredText",defaultMessage:"Required field"}):"",v=(0,g.d5)(i.text,s.text,l.text),P=s.text&&l.text?l.text:void 0;return(0,c.useEffect)((()=>{o.current&&o.current.scrollIntoView({behavior:"smooth"})})),(0,O.jsx)(x,{ref:o,isValid:!l.text,children:(0,O.jsx)(b.NI,{label:a.formatMessage({id:"moderation.abuse.pleaseExplain",defaultMessage:"Explain what's wrong"}),inputComponent:h.g,inputProps:{id:"reasons-text",name:"text",value:i.text||"",rows:4,showSymbolsCount:!0,maxLength:r.userNote.maxText,placeholder:a.formatMessage({id:"moderation.abuse.reasonText.placeholder",defaultMessage:"Tip: Want to report multiple ads? Paste their link here."}),dataAttributes:{testid:"reasons-text"},validationStatus:v,onChange:e=>{u("text",!0),d(e)},onFocus:()=>{var e={touch_point_button:(0,y.z)(r.level,r.key,r.parentKey,r.path,r.reportType)};n(f._L.events.adReportTextFieldSelected,e)},onBlur:()=>{u("text",!0)}},hint:p,enableRequiredIndicator:m,error:P})})},w=r(5592),S=r(71717),C=r(12392),M=r(46070);function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var E,D,_,I,R=v.default.div(i||(i=k(["\n    margin-top: ",";\n"])),(e=>{var{theme:t}=e;return t.space[24]})),F=(0,v.default)(M.H3)(l||(l=k(["\n    margin-bottom: ",";\n"])),(e=>{var{theme:t}=e;return t.space[16]})),T=(0,v.default)(M.P2)(s||(s=k(["\n    margin-bottom: ",";\n"])),(e=>{var{theme:t}=e;return t.space[24]})),L=(0,v.default)(b.NI)(u||(u=k(["\n    width: 100%;\n    margin-bottom: ",";\n"])),(e=>{var{theme:t}=e;return t.space[24]})),B=e=>{var{formProps:t,nameConfig:r,emailConfig:n,adId:a}=e,{trackPageView:o}=(0,f.rS)(),i=(0,j.useIntl)(),l=S.gg.get(),{values:s,errors:u,touched:d,setFieldTouched:m,handleChange:p}=t,v=(0,g.d5)(s.name,d.name,u.name),b=(0,g.d5)(s.email,d.email,u.email),h=d.name&&u.name?u.name:void 0,y=d.email&&u.email?u.email:void 0;return(0,c.useEffect)((()=>{l&&(m("name",!0),m("email",!0))}),[]),(0,C.l)((()=>{o(f._L.pageViews.adReportDetails,{ad_id:String(a)})}),[]),(0,O.jsxs)(R,{children:[(0,O.jsx)(F,{variant:"bold",children:i.formatMessage({id:"moderation.abuse.emailForm.heading",defaultMessage:"Before sending this report..."})}),(0,O.jsx)(T,{children:i.formatMessage({id:"moderation.abuse.emailForm.info",defaultMessage:"We need your details to keep you informed about its outcome. Weâ€™ll only ask for these details once. Let us know how we can reach you."})}),r.visible?(0,O.jsx)(L,{label:i.formatMessage({id:"moderation.abuse.emailForm.labelName",defaultMessage:"Name (or company name)"}),inputComponent:w.oi,inputProps:{id:"reporter-name",name:"name",defaultValue:(null==l?void 0:l.name)||"",validationStatus:v,onChange:e=>{m("name",!0),p(e)},onBlur:()=>{m("name",!0)}},enableRequiredIndicator:r.required,error:h}):null,n.visible?(0,O.jsx)(L,{label:i.formatMessage({id:"moderation.abuse.emailForm.labelEmail",defaultMessage:"Email"}),inputComponent:w.oi,inputProps:{id:"reporter-email",name:"email",defaultValue:(null==l?void 0:l.email)||"",validationStatus:b,onChange:e=>{m("email",!0),p(e)},onBlur:()=>{m("email",!0)}},enableRequiredIndicator:n.required,error:y}):null]})},A=v.default.form(E||(E=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    width: 100%;\n"]))),K=e=>{var{reason:t,formProps:r,updateState:n,hasContactFields:a,adId:o}=e;(0,c.useEffect)((()=>{n({isSubmitting:r.isSubmitting,errors:r.errors,touched:r.touched})}),[r.isSubmitting,r.errors,r.touched,n]);var{config:{email:i,name:l}}=t,s=a&&(i.visible||l.visible);return(0,O.jsx)(A,{onSubmit:r.handleSubmit,id:"reportForm",name:"reportForm","data-testid":"report-form",children:s?(0,O.jsx)(B,{formProps:r,nameConfig:l,emailConfig:i,adId:o}):(0,O.jsx)(P,{formProps:r,reason:t})})},V=r(80191),q=r(34283),z=r(13501);function N(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var H=v.default.ul(D||(D=N(["\n    width: 100%;\n    list-style: none;\n    ","\n"])),(e=>{var{theme:t}=e;return"\n        margin: ".concat(t.space[0],";\n        padding: ").concat(t.space[0],";\n    ")})),U=(0,v.default)(z.default)(_||(_=N(["\n    color: ",";\n"])),(e=>{var{theme:t}=e;return t.colors.$05_teal_primary})),G=(0,v.default)(M.P4)(I||(I=N(["\n    color: ",";\n"])),(e=>{var{theme:t}=e;return t.colors["text-global-secondary"]})),Y=e=>{var{reasons:t,setSelectedReason:r,reasonMap:n,selectedReason:a}=e;return(0,O.jsx)(H,{"data-testid":"reason-list",children:t.map((e=>(0,O.jsxs)(V.ListItem,{role:"listitem",onClick:()=>r(e),suffixIcon:()=>n[e.key]?(0,O.jsx)(q.default,{role:"img","aria-label":"Arrow icon"}):e.key===(null==a?void 0:a.key)?(0,O.jsx)(U,{role:"img","aria-label":"Tick icon"}):null,children:[(0,O.jsx)(M.P2,{children:e.content.reason}),e.content.description&&(0,O.jsx)(G,{children:e.content.description})]},e.key)))})},Z=r(40136),W=r(4176);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q,ee,te,re,ne,ae,oe,ie=e=>{var t,r,n=(0,j.useIntl)(),{setMultilevelFormState:a,onSubmit:o,reasonMap:i,selectedReason:l,setSelectedReason:s,hasContactFields:u,adId:d,reasons:f}=e,m=(0,c.useCallback)((e=>{a({isSubmitting:e.isSubmitting,touched:e.touched,errors:e.errors})}),[a]),v=S.gg.get();return(0,O.jsxs)(W.DialogBody,{children:[u?null:(0,O.jsx)(Y,{reasons:f,reasonMap:i,setSelectedReason:s,selectedReason:l}),(null==l?void 0:l.userNote.visible)&&(0,O.jsx)(p.J9,{validateOnMount:!1,validateOnChange:!0,validateOnBlur:!1,validate:t=>{var r,a,{selectedReason:{userNote:o,config:i}={}}=e,l={};return l=J(J(J(J({},l),null!=o&&o.visible?J({},((e,t,r)=>{var n={},a=e.text.trim().length,{minText:o,maxText:i,required:l}=r;return l&&!a?n.text=t.formatMessage({id:"moderation.abuse.requiredText",defaultMessage:"Text is required"}):a&&o&&a<o?n.text=t.formatMessage({id:"moderation.abuse.minChars",defaultMessage:"Enter at least {number} characters"},{number:o}):a&&i&&a>i&&(n.text=t.formatMessage({id:"moderation.abuse.maxChars",defaultMessage:"Enter no more than {number} characters"},{number:i})),n})(t,n,o)):{}),u&&null!=i&&null!==(r=i.name)&&void 0!==r&&r.visible?J({},((e,t,r)=>{var n={},a=e.name.trim().length,{maxText:o,required:i}=r;return i&&!a?n.name=t.formatMessage({id:"moderation.abuse.emailForm.requiredField",defaultMessage:"This field is required"}):a<2?n.name=t.formatMessage({id:"moderation.abuse.minChars",defaultMessage:"Enter at least {number} characters"},{number:2}):a>o&&(n.name=t.formatMessage({id:"moderation.abuse.maxChars",defaultMessage:"Enter no more than {number} characters"},{number:o})),n})(t,n,i.name)):{}),u&&null!=i&&null!==(a=i.email)&&void 0!==a&&a.visible?J({},((e,t,r)=>{var n={},a=e.email.trim(),o=a.length,{maxText:i,required:l}=r;return l&&!o?n.email=t.formatMessage({id:"moderation.abuse.emailForm.requiredField",defaultMessage:"This field is required"}):o>i?n.email=t.formatMessage({id:"moderation.abuse.maxChars",defaultMessage:"Enter no more than {number} characters"},{number:i}):(0,Z.a)(a)||(n.email=t.formatMessage({id:"moderation.abuse.emailForm.invalidEmail",defaultMessage:"This doesn't look like an email..."})),n})(t,n,i.email)):{}),l},onSubmit:o,initialValues:{text:"",reason:null,name:null!==(t=null==v?void 0:v.name)&&void 0!==t?t:"",email:null!==(r=null==v?void 0:v.email)&&void 0!==r?r:""},children:e=>(0,O.jsx)(K,{reason:l,formProps:e,updateState:m,hasContactFields:u,adId:d})})]})},le=r(27123),se=r(45040),ue=r(71256),ce=r(60702);function de(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var fe,me,pe,ve=(0,v.default)(W.DialogHeader)(Q||(Q=de(["\n    justify-content: space-between;\n    display: flex;\n"]))),be=v.default.button(ee||(ee=de(["\n    ","\n    display: flex;\n\n    &:hover {\n        cursor: pointer;\n    }\n"])),(e=>{var{theme:t}=e;return"\n        background-color: ".concat(t.colors["background-global-primary"],";\n        padding-right: ").concat(t.space[24],";\n    ")})),ge=()=>(0,le.css)(te||(te=de(["\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    margin: 0;\n"]))),he=(0,v.default)(M.H3)(re||(re=de(["\n    ","\n    ","\n"])),ge,(e=>{var{theme:t}=e;return(0,le.css)(ne||(ne=de(["\n        padding-left: ",";\n        padding-right: ",";\n    "])),t.space[0],t.space[24])})),ye=(0,v.default)(M.H4)(ae||(ae=de(["\n    ","\n    ","\n"])),ge,(e=>{var{theme:t}=e;return"\n        font-weight: ".concat(t.fontWeights[500],";\n        padding-left: ").concat(t.space[0],";\n        padding-right: ").concat(t.space[24],";\n        text-align: left;\n        margin-right: auto;\n    ")})),je=(0,v.default)(be)(oe||(oe=de(["\n    padding-right: ",";\n"])),(e=>{var{theme:t}=e;return t.space[0]})),Oe=e=>{var{isDesktopView:t,hasPreviousLevel:r,handlePreviousLevel:n,onClose:a,title:o,hasContactFields:i}=e,l=(0,j.useIntl)(),s=t?he:ye;return(0,O.jsxs)(ve,{children:[r&&(0,O.jsx)(be,{onClick:n,"aria-label":"Back",children:(0,O.jsx)(se.default,{})}),(0,O.jsx)(s,{children:i?l.formatMessage({id:"moderation.abuse.emailForm.header",defaultMessage:"Your details"}):o||l.formatMessage({id:"moderation.abuse.pageLabel",defaultMessage:"Report abuse"})}),t?(0,O.jsx)(je,{onClick:a,"aria-label":"Close",children:(0,O.jsx)(ue.default,{})}):(0,O.jsx)(ce.Z,{"aria-label":"Close",children:(0,O.jsx)(ue.default,{})})]})},xe=r(41226),Pe=r(57584),we=r(96106);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ee=(0,v.default)(xe.Button)(fe||(fe=ke(["\n    width: 100%;\n"]))),De=v.default.div(me||(me=ke(["\n    display: flex;\n    height: ",";\n"])),(e=>{var{theme:t}=e;return t.space[24]})),_e=(0,v.default)(M.P4)(pe||(pe=ke(["\n    color: ",";\n    text-align: center;\n"])),(e=>{var{theme:t}=e;return t.colors["text-global-secondary"]})),Ie=e=>{var{isFooterButtonVisible:t,isFooterButtonDisabled:r,hasContactFields:n,onContinue:a}=e,{redirectLinks:o={}}=(0,c.useContext)(we.Z);if(!t)return(0,O.jsx)(De,{});var i=a&&!n;return(0,O.jsxs)(W.DialogFooter,{children:[(0,O.jsx)(_e,{children:(0,O.jsx)(Pe._H,{id:n?"moderation.abuse.emailForm.privacy":"moderation.abuse.goodFaithInfo",defaultMessage:n?"Your details are processed according to our <re>Privacy Policy</re> and used to handle your report.Your details are processed according to our Privacy Policy and used to handle your report.":"By sending this report, you confirm that you are acting in good faith and that the information you provided is true to the best of your knowledge.",values:{re:e=>(0,O.jsx)("a",{href:o.privacyPolicy,rel:"noreferrer",target:"_blank",children:e})},children:e=>(0,O.jsx)("span",{children:e})})}),(0,O.jsx)(Ee,Ce(Ce({css:{marginBottom:16},"data-testid":"report-form-btn",form:"reportForm",type:i?"button":"submit",disabled:r},i?{onClick:a}:{}),{},{children:(0,O.jsx)(Pe._H,{id:i?"moderation.abuse.emailForm.continue":"moderation.abuse.sendReport",defaultMessage:i?"Continue":"Report"})}))]})},Re=r(49837),Fe=r(36657),Te=r(69221),Le=r(75973),Be=r(29483),Ae=r(9262);function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e,t,r,n,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}function Ne(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ze(o,n,a,i,l,"next",e)}function l(e){ze(o,n,a,i,l,"throw",e)}i(void 0)}))}}var He,Ue=()=>{var e=(0,j.useIntl)(),t=(0,d.useHistory)(),{locale:r,siteCode:n,langISOCode:a,atlasAuthConfig:{adsReportingAPIUrl:o}}=(0,Re.MG)();return function(){var i=Ne((function*(i,l){try{return yield Te.Nv.get("".concat(o,"reasons"),Ve({siteCode:n,lang:a},i&&{variant:i}),{headers:{"Content-Type":"application/json","Accept-Language":r}},!1,!1,!0)}catch(r){(0,Le.Jn)(e.formatMessage({id:"error500.title"}),5e3),l||t.goBack()}return null}));return function(e,t){return i.apply(this,arguments)}}()},Ge=()=>{var{getAuthToken:e}=(0,c.useContext)(Ae.Vo),{atlasAuthConfig:{adsReportingAPIUrl:t},siteCode:r}=(0,Re.MG)(),n=(0,j.useIntl)(),a=(0,S.Sl)();return function(){var o=Ne((function*(o,i,l,s,u,c,d,m){var p=function(){var n=Ne((function*(){var n={ad_id:u.toString(),site_code:r,report_type:o.reportType,path:o.path,text:i,email:l,name:s,experiment_id:c||void 0,variant:d||void 0},a=yield e(),f=null==a?void 0:a.accessToken;return yield Te.Nv.post("".concat(t,"ad-reports"),Ve({},n),{headers:Ve({"Content-Type":"application/json"},f?{Authorization:"Bearer "+f}:{})})}));return function(){return n.apply(this,arguments)}}();try{return yield p(),a(m?f._L.events.adReportDetailsSend:f._L.events.adReportSent,o,u),!0}catch(e){return(0,Le.Jn)(n.formatMessage({id:"error500.title"}),5e3),Be.default.captureException(e),!1}}));return function(e,t,r,n,a,i,l,s){return o.apply(this,arguments)}}()};function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function We(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(e,t,r,n,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}function Je(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Xe(o,n,a,i,l,"next",e)}function l(e){Xe(o,n,a,i,l,"throw",e)}i(void 0)}))}}var $e={allReasons:void 0,reasons:void 0,reasonMap:void 0,selectedReason:void 0,title:void 0,level:1},Qe=(0,v.default)(W.Dialog)(He||(He=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    max-width: 504px;\n"]))),et="multilevel-report-container-dialog",tt=e=>{var{adId:t,isDesktopView:r=!1,onSuccess:n,onClose:a}=e,{openDialog:o}=(0,W.useDialogState)(et),i=(0,d.useHistory)(),[l,s]=(0,c.useState)($e),[u,p]=(0,c.useState)(null),[v,b]=(0,c.useState)(null),[g,h]=(0,c.useState)(0),[j,x]=(0,c.useState)({isSubmitting:!1,touched:void 0,errors:void 0}),P=(0,Fe.useExperiment)(u||""),{atlasAuthConfig:{adsReportingAPIUrl:w},siteCode:M}=(0,Re.MG)(),k=Ge(),E=Ue(),D=(0,S.Sl)(),_=(0,S.Y)(),[I,R]=(0,c.useState)(!1),{trackPageView:F}=(0,f.rS)();(0,c.useEffect)((()=>{o()}),[o]),(0,c.useEffect)((()=>{P!==v&&b(P)}),[P,v]),(0,c.useEffect)((()=>{Je((function*(){if(!l.allReasons&&g<1||v&&g<2){h((e=>e+1));var e=yield E(v,r||!1);if(!e)return;var t=e.data,n=t.filter((e=>!e.parentKey)),a=(0,y.C)(t);s({allReasons:t,reasons:n,reasonMap:a}),u!==e.experiment.id&&p(e.experiment.id)}}))()}),[w,M,i,r,l.allReasons,u,v,E,g]),(0,C.l)((()=>{F(f._L.pageViews.abuse,{ad_id:String(t)})}),[t]);var T=function(){var e=Je((function*(e,a){var{setSubmitting:o}=a,{text:s,name:c,email:d}=e,f=(0,S.cy)(d),m=l.selectedReason;d&&c&&S.gg.set({name:c,email:d}),m&&(o(!0),(yield k(m,s||"",d||"",c||"",t,u,v,I))&&(r?null==n||n(f):i.replace("".concat(window.location.pathname,"/").concat(_&&f?"email":"thanks"))))}));return function(t,r){return e.apply(this,arguments)}}(),{reasons:L,reasonMap:B,selectedReason:A,title:K,allReasons:V}=l,q=(0,c.useMemo)((()=>A&&B?B[A.key]?B[A.key]:A.parentKey?B[A.parentKey]:L:L),[A,B,L]),z=(0,c.useMemo)((()=>Boolean(A&&((null==B?void 0:B[A.key])||A.parentKey))),[A,B]),N=(0,c.useMemo)((()=>{var e,t,r,n,a,o,i=I?!((null===(e=j.errors)||void 0===e||!e.name)&&(null===(t=j.errors)||void 0===t||!t.email)&&null!==(r=j.touched)&&void 0!==r&&r.name&&null!==(n=j.touched)&&void 0!==n&&n.email):!(null===(a=j.errors)||void 0===a||!a.text)||!(null!==(o=j.touched)&&void 0!==o&&o.text),l=!!(!A||null!=B&&B[A.key]||A.userNote.visible&&A.userNote.required)&&i;return j.isSubmitting||!A||l}),[A,j.isSubmitting,j.errors,j.touched,B,I]),H=(0,c.useMemo)((()=>{if(!A||!B)return!1;var{key:e,parentKey:t}=A,r=B.hasOwnProperty(e),n=t&&B.hasOwnProperty(t);return Boolean(!r&&n)}),[A,B]);return null!=L&&L.length?(0,O.jsxs)(Qe,{id:et,mobileFullscreen:!0,enableCloseButton:!1,onDialogClose:a,children:[(0,O.jsx)(Oe,{isDesktopView:r,hasPreviousLevel:z,handlePreviousLevel:()=>{if(D(f._L.events.adReportGoBack),I)R(!1);else if(null==q?void 0:q.some((e=>e.key===(null==A?void 0:A.key)))){var e=null!=A&&A.parentKey?null==V?void 0:V.find((e=>e.key===A.parentKey)):void 0,t=null!=e&&e.parentKey?null==V?void 0:V.find((t=>t.key===e.parentKey)):void 0;s((e=>Ze(Ze({},e),{},{title:null==t?void 0:t.content.reason,selectedReason:t,level:null==t?void 0:t.level})))}else{var r=null!=A&&A.parentKey?null==V?void 0:V.find((e=>e.key===A.parentKey)):void 0;s((e=>Ze(Ze({},e),{},{title:null==r?void 0:r.content.reason,selectedReason:r,level:null==r?void 0:r.level})))}},onClose:a,title:K,hasContactFields:I}),(0,O.jsx)(ie,{selectedReason:A,setSelectedReason:e=>{var t;if(e.key!==(null===(t=l.selectedReason)||void 0===t?void 0:t.key)){var r=null==V?void 0:V.find((t=>t.key===(null==e?void 0:e.parentKey)));D(f._L.events.adReportSelectLevel+e.level,e),s((t=>Ze(Ze({},t),{},{selectedReason:e,title:r?r.content.reason:e.content.reason,level:e.level})))}},reasons:q,reasonMap:B,onSubmit:T,setMultilevelFormState:x,hasContactFields:I,adId:t}),(0,O.jsx)(Ie,{isFooterButtonVisible:H,isFooterButtonDisabled:N,hasContactFields:I,onContinue:_?e=>{e.preventDefault(),D(f._L.events.adReportContinue,A,t),R(!0)}:null})]}):(0,O.jsx)(m.Z,{name:"center"})}},71717:(e,t,r)=>{r.d(t,{Sl:()=>p,Y:()=>v,cy:()=>b,gg:()=>m});var n=r(71803),a=r(48048),o=r(16887),i=r(9262),l=r(48508),s=r(50156),u=r(8354);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=[s.SITE_CODE.OLXPL,s.SITE_CODE.OLXBG,s.SITE_CODE.OLXRO,s.SITE_CODE.OLXPT],m=(0,l.jZ)("reporting_contact_information"),p=()=>{var{trackEvent:e}=(0,a.rS)();return(t,r,n)=>{var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({ad_id:n},r?{[a.Hj.touchPointButton]:(0,o.z)(r.level,r.key,r.parentKey,r.path,r.reportType)}:{});e(t,i)}},v=()=>{var{authenticated:e}=(0,n.useContext)(i.Vo),{appConfig:{siteCode:t}}=(0,n.useContext)(u.ZP),r=!e&&(e=>f.includes(e))(t);return r},b=e=>{var t=m.get();return e!==(null==t?void 0:t.email)}},16887:(e,t,r)=>{r.d(t,{C:()=>n,z:()=>a});var n=e=>{var t={};return e.forEach((e=>{e.parentKey&&(t[e.parentKey]?t[e.parentKey].push(e):t[e.parentKey]=[e])})),t},a=(e,t,r,n,a)=>'["level":'.concat(e,',"key":"').concat(t,'","parentKey":"').concat(r,'","path":"').concat(n,'","reportType":"').concat(a,'"]')}}]);
//# sourceMappingURL=73678.7ac8596ec.chunk.js.map